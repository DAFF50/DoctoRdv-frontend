<div class="container">
  <!-- Header -->
  <div class="header">
    <h1>â• Ajouter un utilisateur</h1>
    <p>CrÃ©ez un nouveau compte utilisateur dans le systÃ¨me</p>
  </div>
</div>

<div class="container">
  <div class="form-container">
    <form class="add-user-form" [formGroup]="formUtilisateur" (ngSubmit)="onSubmit()">

      <!-- Section 1: Type d'utilisateur -->
      <div class="form-section">
        <div class="section-header">
          <h3>ğŸ‘¤ Type d'utilisateur</h3>
          <p class="section-subtitle">SÃ©lectionnez le rÃ´le de l'utilisateur</p>
        </div>

        <div class="role-selector">
          <label class="role-option">
            <input type="radio" name="role" value="admin" (change)="onRoleChange('admin')"
                   [checked]="selectedRole === 'admin'">
            <div class="role-card">
              <div class="role-icon admin-icon">ğŸ”§</div>
              <h4>Administrateur</h4>
              <p>AccÃ¨s complet au systÃ¨me</p>
            </div>
          </label>

          <label class="role-option">
            <input type="radio" name="role" value="medecin" (change)="onRoleChange('medecin')"
                   [checked]="selectedRole === 'medecin'">
            <div class="role-card">
              <div class="role-icon medecin-icon">ğŸ‘¨â€âš•</div>
              <h4>MÃ©decin</h4>
              <p>Gestion des consultations</p>
            </div>
          </label>
        </div>
      </div>

      <!-- Section 2: Informations personnelles -->
      <div class="form-section">
        <div class="section-header">
          <h3>ğŸ“ Informations personnelles</h3>
          <p class="section-subtitle">Renseignez les informations de base</p>
        </div>

        <div class="form-grid">
          <div class="form-group">
            <label>
              <span class="label-icon">ğŸ‘¤</span>
              PrÃ©nom
              <span class="required">*</span>
            </label>
            <input type="text" placeholder="Ex: Mamadou" formControlName="prenom">
            <div *ngIf="submitted && f2['prenom'].errors">
              <span class="text-danger" *ngIf="f2['prenom'].errors['required']">Obligatoire</span>
              <span class="text-danger" *ngIf="f2['prenom'].errors['maxlength']">maximum 255 caracteres</span>
            </div>
          </div>

          <div class="form-group">
            <label>
              <span class="label-icon">ğŸ‘¤</span>
              Nom
              <span class="required">*</span>
            </label>
            <input type="text" placeholder="Ex: Diallo" formControlName="nom">
            <div *ngIf="submitted && f2['nom'].errors">
              <span class="text-danger" *ngIf="f2['nom'].errors['required']">Obligatoire</span>
              <span class="text-danger" *ngIf="f2['nom'].errors['maxlength']">maximum 255 caracteres</span>
            </div>
          </div>

          <div class="form-group full-width">
            <label>
              <span class="label-icon">ğŸ“§</span>
              Email
              <span class="required">*</span>
            </label>
            <input type="email" placeholder="exemple@email.com" formControlName="email">
            <div *ngIf="submitted && f2['email'].errors">
              <span class="text-danger" *ngIf="f2['email'].errors['required']">obligatoire</span>
              <span class="text-danger" *ngIf="f2['email'].errors['email']">invalide</span>
            </div>
            <div *ngIf="emailError">
              <small class="text-danger">{{ emailError }}</small>
            </div>
          </div>

          <div class="form-group full-width" *ngIf="selectedRole === 'medecin'">
            <label>
              <span class="label-icon">ğŸ“±</span>
              TÃ©lÃ©phone
              <span class="required">*</span>
            </label>
            <input type="tel" placeholder="+221 77 123 45 67" formControlName="telephone">
            <div *ngIf="submitted && f2['telephone'].errors">
              <span class="text-danger" *ngIf="f2['telephone'].errors['required']">obligatoire</span>
              <span class="text-danger" *ngIf="f2['telephone'].errors['minlength']">minimum 8 caracteres</span>
              <span class="text-danger" *ngIf="f2['telephone'].errors['maxlength']">maximum 20 caracteres</span>
            </div>
          </div>

          <div class="form-group full-width" *ngIf="selectedRole === 'medecin'">
            <label>
              <span class="label-icon">ğŸ“±</span>
              SpÃ©cialitÃ©
              <span class="required">*</span>
            </label>
            <select formControlName="specialite_id">
              <option value="">SÃ©lectionner...</option>
              <option value="{{s.id}}" *ngFor="let s of specialites">{{ s.libelle }}</option>
            </select>
            <div *ngIf="submitted && f2['specialite_id'].errors">
              <span class="text-danger" *ngIf="f2['specialite_id'].errors['required']">obligatoire</span>
            </div>
          </div>

        </div>
      </div>

      <!-- Note informative -->
      <div class="form-info">
        <div class="info-icon">ğŸ’¡</div>
        <div class="info-content">
          <p>Les champs marquÃ©s d'une Ã©toile (<span class="required">*</span>) sont obligatoires.</p>
        </div>
      </div>

      <!-- Note tÃ©lÃ©phone (en vert) -->
      <div class="form-info-phone" *ngIf="selectedRole === 'medecin'">
        <div class="info-icon">ğŸ“±</div>
        <div class="info-content">
          <p>Le numÃ©ro de tÃ©lÃ©phone doit commencer par <strong>77</strong>, <strong>78</strong>, <strong>76</strong> ou
            <strong>70</strong> et ne doit comporter que <strong>9</strong> chiffres</p>
        </div>
      </div>

      <!-- Actions -->
      <div class="form-actions">
        <button type="button" class="btn-action btn-cancel" routerLink="/admin/utilisateur">
          <span>âœ•</span>
          Annuler
        </button>
        <button type="submit" class="btn-action btn-submit">
          <span>âœ“</span>
          {{ this.id ? 'Modifier l\'utilisateur' : 'CrÃ©er l\'utilisateur' }}
        </button>
      </div>
    </form>
  </div>
</div>
